{"ast":null,"code":"import React,{Fragment,useContext,useState}from\"react\";import{useParams}from\"react-router-dom\";import{Alert}from\"./Action\";import moment from\"moment\";import{LayoutContext}from\"../layout\";import{deleteReview}from\"./Action\";import{isAuthenticate}from\"../auth/fetchApi\";import{getSingleProduct}from\"./FetchApi\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AllReviews=props=>{const{data,dispatch}=useContext(LayoutContext);const{pRatingsReviews}=data.singleProductDetail;let{id}=useParams();// Prodduct Id\nconst[fData,setFdata]=useState({success:false});if(fData.success){setTimeout(()=>{setFdata({...fData,success:false});},2000);}const fetchData=async()=>{try{let responseData=await getSingleProduct(id);if(responseData.Product){dispatch({type:\"singleProductDetail\",payload:responseData.Product});}if(responseData.error){console.log(responseData.error);}}catch(error){console.log(error);}};console.log(pRatingsReviews);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\",children:fData.success?Alert(\"red\",fData.success):\"\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 mb-12 md:mx-16 lg:mx-20 xl:mx-24\",children:pRatingsReviews.length>0?pRatingsReviews.map((item,index)=>{return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 md:mb-8 flex flex-col md:flex-row md:items-start\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"mx-2 w-16 h-16 rounded-full\",src:\"https://secure.gravatar.com/avatar/676d90a1574e9d3ebf98dd36f7adad60?s=60&d=mm&r=g\",alt:\"pic\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-2 flex justify-between w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"span\",{children:item.user?item.user.name:\"\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-yellow-700\",children:moment(item.createdAt).format(\"lll\")})]}),/*#__PURE__*/_jsx(\"div\",{className:\"leading-tight mt-3\",children:item.review})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[[...Array(Number(item.rating))].map(index=>{return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 fill-current text-yellow-700\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})})},index);}),[...Array(5-Number(item.rating))].map(index=>{return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 fill-current text-gray-300\",fill:\"currentColor\",viewBox:\"0 0 20 20\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\"})})},index);})]}),item.user&&isAuthenticate()&&item.user._id===isAuthenticate().user._id?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center my-2\",children:/*#__PURE__*/_jsx(\"span\",{onClick:e=>deleteReview(item._id,data.singleProductDetail._id,fetchData,setFdata),className:\"hover:bg-gray-300 p-2 rounded-full cursor-pointer\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-yellow-700\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})})})}):/*#__PURE__*/_jsx(\"div\",{})]})]})]})},index);}):/*#__PURE__*/_jsx(\"div\",{children:\"No Review found\"})})]});};export default AllReviews;","map":{"version":3,"names":["React","Fragment","useContext","useState","useParams","Alert","moment","LayoutContext","deleteReview","isAuthenticate","getSingleProduct","jsx","_jsx","jsxs","_jsxs","AllReviews","props","data","dispatch","pRatingsReviews","singleProductDetail","id","fData","setFdata","success","setTimeout","fetchData","responseData","Product","type","payload","error","console","log","children","className","length","map","item","index","src","alt","user","name","createdAt","format","review","Array","Number","rating","fill","viewBox","xmlns","d","_id","onClick","e","stroke","strokeLinecap","strokeLinejoin","strokeWidth"],"sources":["C:/Users/Shashanth V/OneDrive/Desktop/MERN_Stack_Project_Ecommerce_Hayroo-master/client/src/components/shop/productDetails/AllReviews.js"],"sourcesContent":["import React, { Fragment, useContext, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Alert } from \"./Action\";\n\nimport moment from \"moment\";\nimport { LayoutContext } from \"../layout\";\nimport { deleteReview } from \"./Action\";\nimport { isAuthenticate } from \"../auth/fetchApi\";\nimport { getSingleProduct } from \"./FetchApi\";\n\nconst AllReviews = (props) => {\n  const { data, dispatch } = useContext(LayoutContext);\n  const { pRatingsReviews } = data.singleProductDetail;\n  let { id } = useParams(); // Prodduct Id\n\n  const [fData, setFdata] = useState({\n    success: false,\n  });\n\n  if (fData.success) {\n    setTimeout(() => {\n      setFdata({ ...fData, success: false });\n    }, 2000);\n  }\n\n  const fetchData = async () => {\n    try {\n      let responseData = await getSingleProduct(id);\n      if (responseData.Product) {\n        dispatch({\n          type: \"singleProductDetail\",\n          payload: responseData.Product,\n        });\n      }\n      if (responseData.error) {\n        console.log(responseData.error);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  console.log(pRatingsReviews);\n  return (\n    <Fragment>\n      <div className=\"md:mx-16 lg:mx-20 xl:mx-24 flex flex-col\">\n        {fData.success ? Alert(\"red\", fData.success) : \"\"}\n      </div>\n      <div className=\"mt-6 mb-12 md:mx-16 lg:mx-20 xl:mx-24\">\n        {/* List start */}\n        {pRatingsReviews.length > 0 ? (\n          pRatingsReviews.map((item, index) => {\n            return (\n              <Fragment key={index}>\n                <div className=\"mb-6 md:mb-8 flex flex-col md:flex-row md:items-start\">\n                  <img\n                    className=\"mx-2 w-16 h-16 rounded-full\"\n                    src=\"https://secure.gravatar.com/avatar/676d90a1574e9d3ebf98dd36f7adad60?s=60&d=mm&r=g\"\n                    alt=\"pic\"\n                  />\n                  <div className=\"mx-2 flex justify-between w-full\">\n                    <div className=\"flex flex-col\">\n                      <div className=\"flex flex-col\">\n                        <span>{item.user ? item.user.name : \"\"}</span>\n                        <span className=\"text-sm text-yellow-700\">\n                          {moment(item.createdAt).format(\"lll\")}\n                        </span>\n                      </div>\n                      <div className=\"leading-tight mt-3\">{item.review}</div>\n                    </div>\n                    <div className=\"flex flex-col\">\n                      <div className=\"flex\">\n                        {/* Yellow Star */}\n                        {[...Array(Number(item.rating))].map((index) => {\n                          return (\n                            <span key={index}>\n                              <svg\n                                className=\"w-4 h-4 fill-current text-yellow-700\"\n                                fill=\"currentColor\"\n                                viewBox=\"0 0 20 20\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                              >\n                                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                              </svg>\n                            </span>\n                          );\n                        })}\n                        {/* White Star */}\n                        {[...Array(5 - Number(item.rating))].map((index) => {\n                          return (\n                            <span key={index}>\n                              <svg\n                                className=\"w-4 h-4 fill-current text-gray-300\"\n                                fill=\"currentColor\"\n                                viewBox=\"0 0 20 20\"\n                                xmlns=\"http://www.w3.org/2000/svg\"\n                              >\n                                <path d=\"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z\" />\n                              </svg>\n                            </span>\n                          );\n                        })}\n                      </div>\n                      {item.user &&\n                      isAuthenticate() &&\n                      item.user._id === isAuthenticate().user._id ? (\n                        <div className=\"flex justify-center my-2\">\n                          <span\n                            onClick={(e) =>\n                              deleteReview(\n                                item._id,\n                                data.singleProductDetail._id,\n                                fetchData,\n                                setFdata\n                              )\n                            }\n                            className=\"hover:bg-gray-300 p-2 rounded-full cursor-pointer\"\n                          >\n                            <svg\n                              className=\"w-6 h-6 text-yellow-700\"\n                              fill=\"none\"\n                              stroke=\"currentColor\"\n                              viewBox=\"0 0 24 24\"\n                              xmlns=\"http://www.w3.org/2000/svg\"\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                strokeWidth={2}\n                                d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                              />\n                            </svg>\n                          </span>\n                        </div>\n                      ) : (\n                        <div></div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </Fragment>\n            );\n          })\n        ) : (\n          <div>No Review found</div>\n        )}\n      </div>\n    </Fragment>\n  );\n};\n\nexport default AllReviews;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}